for(i in 2:length(files)){
file_path <- paste0("pdfs/",files[[i]])
text <- pdftools::pdf_text(file_path)
status <- list(
vacant = (if(!is.null(
if(sum(is.na(extract_vacant(text))) == 0){
extract_vacant(text)})
){extract_vacant(text)} else{
NA
}),
absent = (if(!is.null(
if(sum(is.na(extract_absent(text))) == 0){
extract_absent(text)})
){extract_absent(text)} else{
NA
}),
present = (if(!is.null(
if(sum(is.na(extract_present(text))) == 0){
extract_present(text)})
){extract_present(text)} else{
NA
})
)
vacant <- data.frame(supervisor = status$vacant,
date = extract_date(text),
status ="vacant")
absent <- data.frame(supervisor = status$absent,
date = extract_date(text),
status ="absent")
present <- data.frame(supervisor = status$present,
date = extract_date(text),
status ="present")
df <- rbind(vacant, absent, present)
}
View(df)
for(i in 1:length(files)){
file_path <- paste0("pdfs/",files[[i]])
text <- pdftools::pdf_text(file_path)
tmp <- extract_date(text)
print(tmp)
}
require(pdftools)
function (x, df1, df2, ncp, log = FALSE)
require(stringr)
require(pdftools)
require(stringr)
source("functions2.R")
files <- list.files(path ="pdfs", "\\.pdf")
file_path <- paste0("pdfs/",files[[1]])
text <- pdftools::pdf_text(file_path)
status <- list(
vacant = (if(!is.null(
if(sum(is.na(extract_vacant(text))) == 0){
extract_vacant(text)})
){extract_vacant(text)} else{
NA
}),
absent = (if(!is.null(
if(sum(is.na(extract_absent(text))) == 0){
extract_absent(text)})
){extract_absent(text)} else{
NA
}),
present = (if(!is.null(
if(sum(is.na(extract_present(text))) == 0){
extract_present(text)})
){extract_present(text)} else{
NA
})
)
vacant <- data.frame(supervisor = status$vacant,
date = extract_date(text),
status ="vacant")
absent <- data.frame(supervisor = status$absent,
date = extract_date(text),
status ="absent")
present <- data.frame(supervisor = status$present,
date = extract_date(text),
status ="present")
df <- rbind(vacant, absent, present)
for(i in 2:length(files)){
file_path <- paste0("pdfs/",files[[i]])
text <- pdftools::pdf_text(file_path)
status <- list(
vacant = (if(!is.null(
if(sum(is.na(extract_vacant(text))) == 0){
extract_vacant(text)})
){extract_vacant(text)} else{
NA
}),
absent = (if(!is.null(
if(sum(is.na(extract_absent(text))) == 0){
extract_absent(text)})
){extract_absent(text)} else{
NA
}),
present = (if(!is.null(
if(sum(is.na(extract_present(text))) == 0){
extract_present(text)})
){extract_present(text)} else{
NA
})
)
vacant <- data.frame(supervisor = status$vacant,
date = extract_date(text),
status ="vacant")
absent <- data.frame(supervisor = status$absent,
date = extract_date(text),
status ="absent")
present <- data.frame(supervisor = status$present,
date = extract_date(text),
status ="present")
df <- rbind(df, vacant, absent, present)
}
View(df)
as.date(df$date)
as.Date(df$date)
require(lubridate)
lubridate::as_date(df$date)
df$date
?as.Date()
as.Date(df$date, "%B %d, %Y")
df$date2 <- as.Date(df$date, "%B %d, %Y")
View(df)
# List Loop to Data Frame
require(pdftools)
# List Loop to Data Frame
require(pdftools)
require(stringr)
source("functions2.R")
files <- list.files(path ="pdfs", "\\.pdf")
file_path <- paste0("pdf2/",files[[1]])
text <- pdftools::pdf_text(file_path)
status <- list(
vacant = (if(!is.null(
if(sum(is.na(extract_vacant(text))) == 0){
extract_vacant(text)})
){extract_vacant(text)} else{
NA
}),
absent = (if(!is.null(
if(sum(is.na(extract_absent(text))) == 0){
extract_absent(text)})
){extract_absent(text)} else{
NA
}),
present = (if(!is.null(
if(sum(is.na(extract_present(text))) == 0){
extract_present(text)})
){extract_present(text)} else{
NA
})
)
vacant <- data.frame(supervisor = status$vacant,
date = extract_date(text),
status ="vacant")
absent <- data.frame(supervisor = status$absent,
date = extract_date(text),
status ="absent")
present <- data.frame(supervisor = status$present,
date = extract_date(text),
status ="present")
df <- rbind(vacant, absent, present)
for(i in 2:length(files)){
file_path <- paste0("pdfs/",files[[i]])
text <- pdftools::pdf_text(file_path)
status <- list(
vacant = (if(!is.null(
if(sum(is.na(extract_vacant(text))) == 0){
extract_vacant(text)})
){extract_vacant(text)} else{
NA
}),
absent = (if(!is.null(
if(sum(is.na(extract_absent(text))) == 0){
extract_absent(text)})
){extract_absent(text)} else{
NA
}),
present = (if(!is.null(
if(sum(is.na(extract_present(text))) == 0){
extract_present(text)})
){extract_present(text)} else{
NA
})
)
vacant <- data.frame(supervisor = status$vacant,
date = extract_date(text),
status ="vacant")
absent <- data.frame(supervisor = status$absent,
date = extract_date(text),
status ="absent")
present <- data.frame(supervisor = status$present,
date = extract_date(text),
status ="present")
df <- rbind(df, vacant, absent, present)
}
View(df)
View(df)
View(df)
# List Loop to Data Frame
require(pdftools)
function (x, df1, df2, ncp, log = FALSE)
require(stringr)
source("functions2.R")
files <- list.files(path ="pdfs", "\\.pdf")
file_path <- paste0("pdfs/",files[[1]])
text <- pdftools::pdf_text(file_path)
status <- list(
vacant = (if(!is.null(
if(sum(is.na(extract_vacant(text))) == 0){
extract_vacant(text)})
){extract_vacant(text)} else{
NA
}),
absent = (if(!is.null(
if(sum(is.na(extract_absent(text))) == 0){
extract_absent(text)})
){extract_absent(text)} else{
NA
}),
present = (if(!is.null(
if(sum(is.na(extract_present(text))) == 0){
extract_present(text)})
){extract_present(text)} else{
NA
})
)
vacant <- data.frame(supervisor = status$vacant,
date = extract_date(text),
status ="vacant")
absent <- data.frame(supervisor = status$absent,
date = extract_date(text),
status ="absent")
present <- data.frame(supervisor = status$present,
date = extract_date(text),
status ="present")
df <- rbind(vacant, absent, present)
for(i in 2:length(files)){
file_path <- paste0("pdfs/",files[[i]])
text <- pdftools::pdf_text(file_path)
status <- list(
vacant = (if(!is.null(
if(sum(is.na(extract_vacant(text))) == 0){
extract_vacant(text)})
){extract_vacant(text)} else{
NA
}),
absent = (if(!is.null(
if(sum(is.na(extract_absent(text))) == 0){
extract_absent(text)})
){extract_absent(text)} else{
NA
}),
present = (if(!is.null(
if(sum(is.na(extract_present(text))) == 0){
extract_present(text)})
){extract_present(text)} else{
NA
})
)
vacant <- data.frame(supervisor = status$vacant,
date = extract_date(text),
status ="vacant")
absent <- data.frame(supervisor = status$absent,
date = extract_date(text),
status ="absent")
present <- data.frame(supervisor = status$present,
date = extract_date(text),
status ="present")
df <- rbind(df, vacant, absent, present)
}
# List Loop to Data Frame
require(pdftools)
require(stringr)
source("functions2.R")
files <- list.files(path ="pdf2", "\\.pdf")
file_path <- paste0("pdf2/",files[[1]])
text <- pdftools::pdf_text(file_path)
df2 <- df
files <- list.files(path ="pdf2", "\\.pdf")
file_path <- paste0("pdf2/",files[[1]])
text <- pdftools::pdf_text(file_path)
status <- list(
vacant = (if(!is.null(
if(sum(is.na(extract_vacant(text))) == 0){
extract_vacant(text)})
){extract_vacant(text)} else{
NA
}),
absent = (if(!is.null(
if(sum(is.na(extract_absent(text))) == 0){
extract_absent(text)})
){extract_absent(text)} else{
NA
}),
present = (if(!is.null(
if(sum(is.na(extract_present(text))) == 0){
extract_present(text)})
){extract_present(text)} else{
NA
})
)
vacant <- data.frame(supervisor = status$vacant,
date = extract_date(text),
status ="vacant")
absent <- data.frame(supervisor = status$absent,
date = extract_date(text),
status ="absent")
present <- data.frame(supervisor = status$present,
date = extract_date(text),
status ="present")
df <- rbind(vacant, absent, present)
for(i in 2:length(files)){
file_path <- paste0("pdfs/",files[[i]])
text <- pdftools::pdf_text(file_path)
status <- list(
vacant = (if(!is.null(
if(sum(is.na(extract_vacant(text))) == 0){
extract_vacant(text)})
){extract_vacant(text)} else{
NA
}),
absent = (if(!is.null(
if(sum(is.na(extract_absent(text))) == 0){
extract_absent(text)})
){extract_absent(text)} else{
NA
}),
present = (if(!is.null(
if(sum(is.na(extract_present(text))) == 0){
extract_present(text)})
){extract_present(text)} else{
NA
})
)
vacant <- data.frame(supervisor = status$vacant,
date = extract_date(text),
status ="vacant")
absent <- data.frame(supervisor = status$absent,
date = extract_date(text),
status ="absent")
present <- data.frame(supervisor = status$present,
date = extract_date(text),
status ="present")
df <- rbind(df, vacant, absent, present)
}
for(i in 2:length(files)){
file_path <- paste0("pdf2/",files[[i]])
text <- pdftools::pdf_text(file_path)
status <- list(
vacant = (if(!is.null(
if(sum(is.na(extract_vacant(text))) == 0){
extract_vacant(text)})
){extract_vacant(text)} else{
NA
}),
absent = (if(!is.null(
if(sum(is.na(extract_absent(text))) == 0){
extract_absent(text)})
){extract_absent(text)} else{
NA
}),
present = (if(!is.null(
if(sum(is.na(extract_present(text))) == 0){
extract_present(text)})
){extract_present(text)} else{
NA
})
)
vacant <- data.frame(supervisor = status$vacant,
date = extract_date(text),
status ="vacant")
absent <- data.frame(supervisor = status$absent,
date = extract_date(text),
status ="absent")
present <- data.frame(supervisor = status$present,
date = extract_date(text),
status ="present")
df <- rbind(df, vacant, absent, present)
}
View(df)
View(df)
View(df2)
df$date2 <- as.Date(df$date, "%B %d, %Y")
View(df)
min(df$date2)
max(df$date2)
View(df)
factor(df$supervisor)
df$supervisor <- factor(df$supervisor)
levels(df$supervisor)
hist(df$status)
hist(df$status)
plot(df$date2, df$status)
plot(df$date, df$status)
plot(df$date2, df$status)
library(ggplot2)
library(dplyr)
df %>%
ggplot(aes(supervisor, status)) + geom_col()
df %>%
ggplot(aes(supervisor, status)) + geom_bar()
df %>%
ggplot(aes(supervisor, status)) + geom_col()
df %>%
filter(supervisor == "BEAVER")
df %>%
filter(supervisor == "BEAVER" |
supervisor == "PEER") %>%
ggplot(aes(supervisor, status)) + geom_col()
df %>%
filter(supervisor == "BEAVER" |
supervisor == "PEER") %>%
ggplot(aes(supervisor)) + geom_bar()
df %>%
filter(supervisor == "BEAVER" |
supervisor == "PEER") %>%
ggplot(aes(supervisor)) + geom_bar(aes(status))
df %>%
filter(supervisor == "BEAVER" |
supervisor == "PEER") %>%
ggplot(aes(supervisor)) + geom_col()
df %>%
filter(supervisor == "BEAVER" |
supervisor == "PEER") %>%
ggplot(aes(supervisor, status)) + geom_col()
df %>%
filter(supervisor == "BEAVER" |
supervisor == "PEER") %>%
ggplot(aes(supervisor, status)) + geom_col(fill = status)
df %>%
filter(supervisor == "BEAVER" |
supervisor == "PEER") %>%
ggplot(aes(supervisor, status), fill = status) + geom_col()
df %>%
filter(supervisor == "BEAVER" |
supervisor == "PEER") %>%
ggplot(aes(supervisor, status), fill = status) + geom_col()
df %>%
filter(supervisor == "BEAVER" |
supervisor == "PEER") %>%
ggplot(aes(supervisor, status), color = status) + geom_col()
df %>%
filter(supervisor == "BEAVER" |
supervisor == "PEER") %>%
ggplot(aes(supervisor, status, fill = status)) + geom_col()
df %>%
filter(supervisor == "BEAVER" |
supervisor == "PEER" |
supervisor == "DIESTLER") %>%
ggplot(aes(supervisor, status, fill = status)) + geom_col()
df %>%
filter(supervisor == "BEAVER" |
supervisor == "PEER" |
supervisor == "DIESTLER") %>%
ggplot(aes(status, fill = status)) +
geom_bar() +
df %>%
filter(supervisor == "BEAVER" |
supervisor == "PEER" |
supervisor == "DIESTLER") %>%
ggplot(aes(status, fill = status)) +
geom_bar()
df %>%
filter(supervisor == "BEAVER" |
supervisor == "PEER" |
supervisor == "DIESTLER") %>%
ggplot(aes(status)) +
geom_bar()
df %>%
filter(supervisor == "BEAVER" |
supervisor == "PEER" |
supervisor == "DIESTLER") %>%
ggplot(aes(status), fill = status) +
geom_bar()
df %>%
filter(supervisor == "BEAVER" |
supervisor == "PEER" |
supervisor == "DIESTLER") %>%
ggplot(aes(status), color = status) +
geom_bar()
df %>%
filter(supervisor == "BEAVER" |
supervisor == "PEER" |
supervisor == "DIESTLER") %>%
ggplot(aes(status), color = status) +
geom_bar(fill = status)
df %>%
filter(supervisor == "BEAVER" |
supervisor == "PEER" |
supervisor == "DIESTLER") %>%
ggplot(aes(status)) +
geom_bar(fill = status)
df %>%
filter(supervisor == "BEAVER" |
supervisor == "PEER" |
supervisor == "DIESTLER") %>%
ggplot(aes(status)) +
geom_bar()
df %>%
filter(supervisor == "BEAVER" |
supervisor == "PEER" |
supervisor == "DIESTLER") %>%
ggplot(aes(status)) +
geom_bar() + facet_wrap(~supervisor)
df %>%
filter(supervisor == "BEAVER" |
supervisor == "PEER" |
supervisor == "DIESTLER") %>%
ggplot(aes(status, fill = status)) +
geom_bar() + facet_wrap(~supervisor)
